{"version":3,"file":"test.spec.js","sourceRoot":"","sources":["../../test/test.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import * as Path from 'path';\nimport { expect } from 'chai';\nimport '../index'; // this will load the built in code generators.\nimport * as options from '../src/options';\nimport { syncCodeGen, ensureCodeGen, systemCodeGen, importCodeGen } from '../src/builtin_codegens';\nimport { Loader, ReplaceResult } from '../src/Loader';\nimport { wpFactory, WebpackMockFactory } from './testing/WebpackMock';\n\nfunction objToKvpString(obj: any): string {\n  return Object.keys(obj).map( k => `${k}-${obj[k]}`).join(',');\n}\n\nfunction cwdJoin(...paths: string[]): string {\n  return Path.join(process.cwd(), ...paths);\n}\n\nfunction mapToZero(results: ReplaceResult[]): ReplaceResult | undefined {\n  return results ? results[0] : undefined;\n}\n\ndescribe('Loader', () => {\n\n  it('should return undefined when source has no string literal children', () => {\n    return new Loader(null).replace(\"\")\n      .then(mapToZero)\n      .then( (result: ReplaceResult) => {\n        expect(result).to.be.undefined;\n      });\n  });\n\n  describe('Options', () => {\n    it('should handle empty query by loading default options', () => {\n      const loader = wpFactory().resourcePath('/pc/my-project/root-item.ts').toLoader();\n\n      return loader.replace(\"loadChildren: '../level-1/level-1-item.ts?bySymbol=false'\")\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(objToKvpString(loader.query)).to.eql(objToKvpString(options.DEFAULT_OPTIONS));\n        });\n    });\n\n    it('should use supplied options', () => {\n      const loader = wpFactory()\n        .setOption('delimiter', '!')\n        .setOption('aot', true)\n        .setOption('moduleSuffix', 'test')\n        .resourcePath(cwdJoin('pc/my-project/root-item.ts'))\n        .resolver(cwdJoin('src/@vts/sections/inventory/index.ts'))\n        .toLoader();\n\n\n      return loader.replace(\"loadChildren: '../level-1/level-1-item.ts?bySymbol=false'\")\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(loader.query.delimiter).to.equal('!');\n          expect(loader.query.aot).to.equal(true);\n          expect(loader.query.moduleSuffix).to.equal('test');\n          expect(loader.query.factorySuffix).to.equal(options.DEFAULT_OPTIONS.factorySuffix);\n        });\n    });\n  });\n\n  describe('JIT', () => {\n\n    const factory = wpFactory()\n      .setOption('aot', false)\n      .setOption('bySymbol', false);\n\n    it('should resolve relative module reference', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('src/app/app.routes.ts'))\n        .resolver(cwdJoin('src/app/module-container/child-module/child.module.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: '../module-container/child-module/child.module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModule');\n          expect(result.filePath).to.eql(cwdJoin('src/app/module-container/child-module/child.module'));\n        });\n    });\n\n    it('should resolve deep relative module reference', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('src/app/deep/deeper/deeper-still/app.routes.ts'))\n        .resolver(cwdJoin('src/new-branch/child-module/child.module.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: '../../../../new-branch/child-module/child.module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModule');\n          expect(result.filePath).to.eql(cwdJoin('src/new-branch/child-module/child.module'));\n        });\n    });\n\n    it('should resolve barrel module reference', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('src/app/app.routes.ts'))\n        .resolver(cwdJoin('src/app/module-container/child-module/index.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: 'app/module-container/child-module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModule');\n          expect(result.filePath).to.eql(cwdJoin('src/app/module-container/child-module/index'));\n        });\n    });\n  });\n\n  describe('AOT - With genDir', () => {\n\n    const factory = wpFactory()\n      .setOption('aot', true)\n      .setOption('bySymbol', false)\n      .setOption('genDir', 'compiled');\n\n    it('should resolve relative module reference from compiled code', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('compiled/src/app/app.routes.ngfactory.ts'))\n        .resolver(cwdJoin('src/app/module-container/child-module/child.module.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: '../module-container/child-module/child.module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('compiled/src/app/module-container/child-module/child.module.ngfactory'));\n        });\n    });\n\n    it('should resolve relative module reference from source code', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('src/app/app.routes.ts'))\n        .resolver(cwdJoin('src/app/module-container/child-module/child.module.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: '../module-container/child-module/child.module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('compiled/src/app/module-container/child-module/child.module.ngfactory'));\n        });\n    });\n\n    it('should resolve deep relative module reference from compiled code', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('compiled/src/app/deep/deeper/deeper-still/app.routes.ngfactory.ts'))\n        .resolver(cwdJoin('src/new-branch/child-module/child.module.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: '../../../../new-branch/child-module/child.module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('compiled/src/new-branch/child-module/child.module.ngfactory'));\n        });\n    });\n\n    it('should resolve deep relative module reference from source code', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('src/app/deep/deeper/deeper-still/app.routes.ts'))\n        .resolver(cwdJoin('src/new-branch/child-module/child.module.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: '../../../../new-branch/child-module/child.module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('compiled/src/new-branch/child-module/child.module.ngfactory'));\n        });\n    });\n\n    it('should resolve barrel module reference from compiled code', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('compiled/src/app/app.routes.ngfactory.ts'))\n        .resolver(cwdJoin('src/app/module-container/child-module/index.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: 'app/module-container/child-module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('compiled/src/app/module-container/child-module/index.ngfactory'));\n        });\n    });\n\n    it('should resolve barrel module reference from source code', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('src/app/app.routes.ts'))\n        .resolver(cwdJoin('src/app/module-container/child-module/index.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: 'app/module-container/child-module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('compiled/src/app/module-container/child-module/index.ngfactory'));\n        });\n    });\n  });\n\n  describe('AOT - Without genDir', () => {\n\n    const factory = wpFactory()\n      .setOption('aot', true)\n      .setOption('bySymbol', false)\n      .setOption('genDir', '')\n      .resolver(cwdJoin('src/app/module-container/child-module/child.module.ts'));\n\n    it('should resolve relative module reference from compiled code', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('src/app/app.routes.ngfactory.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: '../module-container/child-module/child.module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('src/app/module-container/child-module/child.module.ngfactory'));\n        });\n    });\n\n    it('should resolve relative module reference from source code', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('src/app/app.routes.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: '../module-container/child-module/child.module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('src/app/module-container/child-module/child.module.ngfactory'));\n        });\n    });\n\n    it('should resolve deep relative module reference from compiled code', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('src/app/deep/deeper/deeper-still/app.routes.ngfactory.ts'))\n        .resolver(cwdJoin('src/new-branch/child-module/child.module.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: '../../../../new-branch/child-module/child.module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('src/new-branch/child-module/child.module.ngfactory'));\n        });\n    });\n\n    it('should resolve deep relative module reference from source code', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('src/app/deep/deeper/deeper-still/app.routes.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: '../../../../new-branch/child-module/child.module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('src/new-branch/child-module/child.module.ngfactory'));\n        });\n    });\n\n    it('should resolve barrel module reference from compiled code', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('compiled/src/app/app.routes.ngfactory.ts'))\n        .resolver(cwdJoin('src/app/module-container/child-module/index.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: 'app/module-container/child-module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('src/app/module-container/child-module/index.ngfactory'));\n        });\n    });\n\n    it('should resolve barrel module reference from source code', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('src/app/app.routes.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: 'app/module-container/child-module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('ChildModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('src/app/module-container/child-module/index.ngfactory'));\n        });\n    });\n  });\n\n  describe('AOT - bySymbol & genDir', () => {\n    const factory = wpFactory()\n      .setOption('aot', true)\n      .setOption('bySymbol', true)\n      .setOption('genDir', '__codegen__')\n      .resolver(cwdJoin('test/integration/app/+detail/index.ts'));\n\n\n    // Using symbol tracking to get the module file.\n    // The module \"demo/app/app.routes.ts\" has a lazy route \"./+detail#DetailModule\"\n    // The \"+detail\" module is a barrel, it has an \"index.ts\" file and the lazy route use it (i.e: it does not do \"./+detail/index\")\n    // The index file DOES NOT contain the module itself, the module is in \"./+detail/detail.module.ts\"...\n    // The index file just re-exports it.\n    // If the bySymbol option is on the loader will track the file holding the module using the ngsummary JSON files.\n    // it will return the module file, not the index file.\n    //\n    // the lazy route in '/test/integration/app/app.routes.ts' is added to the app.module.ngfactory file created by\n    // the compiler, this is why we need to check from compiler code as well.\n    it('should resolve relative module reference from compiled code', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('__codegen__/test/integration/app/app.module.ngfactory.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: './+detail#DetailModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('DetailModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('__codegen__/test/integration/app/+detail/detail.module.ngfactory'));\n        });\n    });\n\n    it('should resolve relative module reference from source code', () => {\n      const loader = factory\n        .resourcePath(cwdJoin('/test/integration/app/app.routes.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: './+detail#DetailModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('DetailModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('__codegen__/test/integration/app/+detail/detail.module.ngfactory'));\n        });\n    });\n\n    it('should override bySymbol settings if set in a resource query', () => {\n      const loader = factory\n        .setOption('bySymbol', false)\n        .resourcePath(cwdJoin('/test/integration/app/app.routes.ts'))\n        .toLoader();\n\n      return loader.replace(`loadChildren: './+detail#DetailModule?bySymbol=true'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.moduleName).to.equal('DetailModuleNgFactory');\n          expect(result.filePath).to.eql(cwdJoin('__codegen__/test/integration/app/+detail/detail.module.ngfactory'));\n        });\n    });\n  });\n\n  describe('Code generators', () => {\n\n    const factory = wpFactory()\n      .setOption('aot', false)\n      .setOption('bySymbol', false)\n      .resourcePath(cwdJoin('src/app/app.routes.ts'))\n      .resolver(cwdJoin('src/app/module-container/child-module/index.ts'));\n\n\n    it('should output sync codegen', () => {\n      const loader = factory\n        .setOption('loader', 'sync')\n        .toLoader();\n\n      return loader.replace(`loadChildren: 'app/module-container/child-module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.replacement).to.eql(syncCodeGen(result.filePath, result.moduleName, loader.query, result.resourceQuery));\n        });\n    });\n\n    it('should output async-require codegen', () => {\n      const loader = factory\n        .setOption('loader', 'async-require')\n        .toLoader();\n\n      return loader.replace(`loadChildren: 'app/module-container/child-module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.replacement).to.eql(ensureCodeGen(result.filePath, result.moduleName, loader.query, result.resourceQuery));\n        });\n    });\n\n    it('should output async-system codegen', () => {\n      const loader = factory\n        .setOption('loader', 'async-system')\n        .toLoader();\n\n      return loader.replace(`loadChildren: 'app/module-container/child-module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.replacement).to.eql(systemCodeGen(result.filePath, result.moduleName, loader.query, result.resourceQuery));\n        });\n    });\n\n    it('should output async-import codegen', () => {\n      const loader = factory\n        .setOption('loader', 'async-import')\n        .toLoader();\n\n      return loader.replace(`loadChildren: 'app/module-container/child-module#ChildModule'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.replacement).to.eql(importCodeGen(result.filePath, result.moduleName, loader.query, result.resourceQuery));\n        });\n    });\n\n\n    it('should output a custom codegen', () => {\n      const loader = factory.toLoader();\n      function custom(file: string, module: string): string {\n        return 'This is a test!';\n      }\n\n      Loader.setCodeGen('sync-custom', custom);\n\n      return loader.replace(`loadChildren: 'app/module-container/child-module#ChildModule?loader=sync-custom'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          expect(result.replacement).to.eql('This is a test!');\n        });\n    });\n\n    it('should throw on unknown loader', () => {\n      const loader = factory.toLoader();\n\n      return loader.replace(`loadChildren: 'app/module-container/child-module#ChildModule?loader=made-up'`)\n        .then(mapToZero)\n        .then( (result: ReplaceResult) => {\n          throw new Error('Mock error - should not get here');\n        })\n        .catch( err => {\n          expect(err.toString()).to.equal('Error: ng-router-loader - Invalid code generator \"made-up\"');\n        });\n    });\n  });\n});"]}